# Databricks Asset Bundle Configuration
# This is the root configuration file for the Building Data Enrichment pipeline

bundle:
  name: building_data_enrichment

# Workspace configuration
workspace:
  host: https://adb-6685660099993059.19.azuredatabricks.net
  root_path: /Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

# Include all resource definitions from subdirectories
include:
  - resources/**/*.yml

# Git configuration (optional but recommended)
sync:
  include:
    - "*.py"
    - "*.yaml"
    - "*.yml"
    - "resources/**"
  exclude:
    - "*.json"  # Don't sync generated configs
    - "__pycache__"
    - "*.pyc"

# Target environments
targets:
  # Development environment
  development:
    mode: development
    default: true  # Make this the default target

    workspace:
      host: https://adb-6685660099993059.19.azuredatabricks.net

    variables:
      catalog: prp_mr_bdap_projects_dev
      schema: geospatialsolutions_dev
      country_iso3: IND
      workspace_path: /Workspace/Users/npokkiri@munichre.com/inventory_nos_db/scripts
      email_notifications: npokkiri@munichre.com

  # Staging environment (optional)
  staging:
    mode: development

    workspace:
      host: https://adb-6685660099993059.19.azuredatabricks.net

    variables:
      catalog: prp_mr_bdap_projects_staging
      schema: geospatialsolutions_staging
      country_iso3: IND
      workspace_path: /Workspace/Users/npokkiri@munichre.com/inventory_nos_db_staging/scripts
      email_notifications: npokkiri@munichre.com

  # Production environment
  production:
    mode: production

    workspace:
      host: https://adb-6685660099993059.19.azuredatabricks.net

    variables:
      catalog: prp_mr_bdap_projects
      schema: geospatialsolutions
      country_iso3: IND
      workspace_path: /Workspace/Users/npokkiri@munichre.com/inventory_nos_db/scripts
      email_notifications: npokkiri@munichre.com

# Global variables (can be overridden by targets)
variables:
  # Country to process
  country_iso3:
    description: "ISO3 country code to process (e.g., IND, USA, BRA)"
    default: IND

  # Catalog and schema
  catalog:
    description: "Databricks Unity Catalog name"
    default: prp_mr_bdap_projects

  schema:
    description: "Database schema name"
    default: geospatialsolutions

  # Workspace paths
  workspace_path:
    description: "Base workspace path for scripts"
    default: /Workspace/Users/npokkiri@munichre.com/inventory_nos_db/scripts

  # Notifications
  email_notifications:
    description: "Email addresses for job notifications"
    default: npokkiri@munichre.com

# Deployment configuration
deployment:
  # Automatically create resources if they don't exist
  # lock_workspace_during_deploy: true
